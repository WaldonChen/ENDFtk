#ifndef ENDFTK_IMPLEMENTATION_TAPEIDENTIFICATION_HPP
#define ENDFTK_IMPLEMENTATION_TAPEIDENTIFICATION_HPP

class ENDFtk::implementation::TapeIdentification {

  /* fields */
  ENDFtk::implementation::record::Base
  < ENDFtk::implementation::record::Character< 66 > > base;

  ENDFtk::implementation::record::TailVerifying
  < ENDFtk::implementation::record::MT,
    ENDFtk::implementation::record::MF > tail;

  /* ctor */
  TapeIdentification( std::string&& text, int tapeNumber ) :
    base( std::move(text) ), tail( tapeNumber, 0, 0 ){}

  template< typename Iterator >
  TapeIdentification( Iterator& it, const Iterator& end, long& lineNumber )
    try: base( it, end ), tail( 0, 0, it, end, lineNumber ){
    } catch ( std::exception& e ) {
      /* error information here */
      throw e;
    } catch ( int fieldNo ){
      --lineNumber;
      /* error information here */
      throw std::exception();
    }
  
  /* methods */
  std::string& text(){ return std::get<0>( base.fields ); }
  const std::string& text() const { return std::get<0>( base.fields ); }

  int& tapeNumber() { return this->tail.material(); }
  int tapeNumber() const { return this->tail.material(); }

  int& NTAPE(){ return this->tapeNumber(); }
  int NTAPE() const { return this->tapeNumber(); }
};

#endif
